.. _INSTALL:

============
Installation
============

Scientific Python environment
-----------------------------
Easily-installed Python distributions are available such as Anaconda_,
Canopy_, and PythonXY_ that include components necessary to run Mindboggle:
Python_ 2.7, NumPy_, SciPy_, Networkx_.  These distributions also include
packages that benefit the user, such as IPython_ (parallel processing) and
Sphinx_ (generating documentation).

Pip python library installation (OSX: ``easy_install pip``;
    Debian/Ubuntu Linux: ``sudo apt-get install python-pip``)

Nipype_ software pipeline framework and its dependencies not included above::

    pip install nibabel
    pip install traits
    pip install nipype
    For the latest dev source:  pip install git+git://github.com/nipy/nipype.git
 
`Visualization Toolkit`_::

    conda install vtk (after installing anaconda)

FreeSurfer_
    This software helps initialize cortical surface labels for
    Mindboggle and generates the directory tree that Mindboggle uses
    to call subject data. To take advantage of the FreeSurfer_ software,
    preprocess T1-weighted data using the ``recon-all -all`` command.
    NOTE: Mindboggle expects that the FreeSurfer SUBJECTS_DIR environment
    variable is set.

ANTS_
    ANTs provides volume-based affine registration that Mindboggle uses to
    report locations in a standard space, nonlinear registration for
    whole-brain labeling, brain extraction, and tissue-class segmentation.
    Mindboggle combines the segmentation from FreeSurfer and ANTs and
    propagates labels through cortex and noncortex voxels.


Download Mindboggle
-------------------
To check out the latest development version using git_::

    git clone git://github.com/binarybottle/mindboggle.git

Install Mindboggle
------------------
Step 1: Install Mindboggle Python software
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Change into the ``mindboggle`` directory and install mindboggle
(depending on permissions you may need to use ``sudo``)::

    python setup.py install

Step 2: Compile Mindboggle C++ code
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Your system must have basic compilation software:

    - C++ compiler such as gcc_
    - cmake_

In the mindboggle_tools/bin directory, run cmake (or ccmake) and make::

    cd mindboggle/mindboggle_tools/bin/
    cmake ..
    make

Step 3: Set environment variables
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For your system to recognize the C++ code we just compiled, include
the following lines in your system's equivalent of a .bash_profile file,
replacing <path to mindboggle> and <path to anaconda>::

    MINDBOGGLE_TOOLS=<path to mindboggle>/mindboggle_tools/bin/
    export MINDBOGGLE_TOOLS
    export PATH=$PATH:$MINDBOGGLE_TOOLS
    export DYLD_LIBRARY_PATH=<path to anaconda>/lib/vtk-5.10:${DYLD_LIBRARY_PATH}

Optional environment variables
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Mindboggle downloads necessary atlas and template data via the Internet
on its first run.  By default, it will save these data to your home directory,
in a ``mindboggled`` subdirectory.  You may *optionally* set the cache
directory by including one more environment variable as above::

    MINDBOGGLE_CACHE=DESIRED_LOCATION
    export MINDBOGGLE_CACHE
    export PATH=$PATH:$MINDBOGGLE_CACHE


.. _install:

======================
 Download and install
======================

Scientific Python environment
-----------------------------
Easily-installed Python distributions are available such as Anaconda_,
Canopy_, and PythonXY_ that include components necessary to run Mindboggle:
Python_ 2.7, NumPy_, SciPy_, Networkx_, and IPython_.

Pip python library installation (OSX: ``easy_install pip``;
    Debian/Ubuntu Linux: ``sudo apt-get install python-pip``)

Nipype_ software pipeline framework and Nibabel neuroimaging i/o library::

    pip install nibabel (required for nipype)
    pip install mayavi  (provides traits, required for nipype)
    pip install nipype

`Visualization Toolkit`_::

    conda install vtk

FreeSurfer_
    This software will help to initialize cortical surface labels for
    Mindboggle and generates the directory tree that Mindboggle uses
    to call subject data. To take advantage of the FreeSurfer_ software,
    preprocess T1-weighted data using the ``recon-all -all`` command.
    Otherwise, place appropriate input files in a file tree corresponding to
    FreeSurfer's subjects/ directory tree (see README).

ANTS_
    ANTS provides volume-based affine registration for reporting locations
    in a standard space and nonlinear registration for whole-brain labeling.


Download Mindboggle
-------------------
To check out the latest development version using git_::

    git clone git://github.com/binarybottle/mindboggle.git

Install Mindboggle
------------------
Step 1: Install Mindboggle Python software
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Change into the ``mindboggle`` directory and install mindboggle
(depending on permissions you may need to use ``sudo``)::

    python setup.py install

Step 2: Compile Mindboggle C++ code
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
Basic compilation software::
  - cmake_
  - C++ compiler such as gcc_

Move the mindboggle_tools directory to wherever you install your software
(let's call it YOUR_SOFTWARE_PATH), then run cmake (or ccmake) and make::

    mv mindboggle_tools YOUR_SOFTWARE_PATH
    cd YOUR_SOFTWARE_PATH/mindboggle_tools/bin/
    cmake ..
    make

Step 3: Set environment variables
~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
For your system to recognize the C++ code we just compiled, include 
the following lines in your system's equivalent of a .bash_profile file::

    MINDBOGGLE_TOOLS=YOUR_SOFTWARE_PATH/mindboggle_tools/bin/
    export MINDBOGGLE_TOOLS
    export PATH=$PATH:$MINDBOGGLE_TOOLS

Optional environment variables
^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
Mindboggle downloads necessary atlas and template data via the Internet
on its first run.  By default, it will save these data to your home directory,
in a ``mindboggled`` subdirectory.  You may *optionally* set the cache
directory by including one more environment variable as above::

    MINDBOGGLE_CACHE=DESIRED_LOCATION
    export MINDBOGGLE_CACHE
    export PATH=$PATH:$MINDBOGGLE_CACHE

If you do not wish to use FreeSurfer and do not have it installed (see README),
also include the following environment variable as above::

    SUBJECTS_DIR=YOUR_FREESURFER_SUBJECTS_PATH
    export SUBJECTS_DIR
    export PATH=$PATH:$SUBJECTS_DIR


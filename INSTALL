.. _INSTALL:

============
Installation  **(UNDER CONSTRUCTION)**
============
We highly recommend running Mindboggle as a virtual machine,
but for those who wish to install from source code, see
`INSTALL2 <http://mindboggle.info/users/INSTALL2.html>`_.

Dependencies to run Mindboggle
------------------------------
Vagrant_
    Vagrant provides reproducible and portable work environments.
    It isolates dependencies and their configuration within a single
    disposable, consistent environment that can run on
    Linux, Mac OS X, or Windows. The single file distributed as Mindboggle
    creates a virtual environment where everything is installed and configured
    to run Mindboggle.

Virtualbox_
    VirtualBox is a x86 and AMD64/Intel64 virtualization product.
    We use VirtualBox as a backend provider for Vagrant;
    alternatives include VMware, Amazon Web Services,...

Dependencies to generate input for Mindboggle
---------------------------------------------
FreeSurfer_
    FreeSurfer provides labeled cortical surfaces, and labeled cortical and
    noncortical volumes.
    See `README <http://mindboggle.info/users/README.html>`_ for instructions
    on how to preprocess T1-weighted MRI data using the ``recon-all`` command.
    NOTE: Mindboggle expects that the FreeSurfer SUBJECTS_DIR environment
    variable is set.

ANTS_
    ANTS provides brain volume extraction, tissue-class segmentation, and
    affine registration that Mindboggle uses to report locations in a standard
    space, and nonlinear registration for whole-brain labeling.
    ANTs data are not required for Mindboggle to run, but improves and
    extends results generated by Mindboggle.
    (Note: After installing ANTS, be sure to copy the files in ANTs/Scripts/
    to the antsbin/bin/ directory, and set the ANTSPATH environment variable.)
    See `README <http://mindboggle.info/users/README.html>`_ for instructions
    on how to preprocess T1-weighted MRI data using the
    ``antsCorticalThickness.sh`` script.

    ..

        FreeSurfer_
            FreeSurfer provides labeled cortical surfaces, and labeled cortical and
            noncortical volumes.
            See `README <http://mindboggle.info/users/README.html>`_ for instructions
            on how to preprocess T1-weighted MRI data using the ``recon-all`` command.
            Don't forget to set these environment variables in the equivalent of your
            .bash_profile file, replacing <install_path>: ::
        
                FREESURFER_HOME=<install_path>/freesurfer
                SUBJECTS_DIR=<install_path>/freesurfer/subjects
                PATH=${FREESURFER_HOME}:${PATH}
                export FREESURFER_HOME SUBJECTS_DIR
                source $FREESURFER_HOME/SetUpFreeSurfer.sh
        
        
        ANTS_
            ANTS provides brain volume extraction, tissue-class segmentation, and
            affine registration that Mindboggle uses to report locations in a standard
            space, and nonlinear registration for whole-brain labeling.
            While these are not required for Mindboggle to run, they improve and
            extend results generated by Mindboggle.
            See `README <http://mindboggle.info/users/README.html>`_ for instructions
            on how to process MRI data using the ``antsCorticalThickness.sh`` script.
            After installing ANTS, be sure to copy these files: ::
        
                cp  <install_path>/ANTs/Scripts/*  <install_path>/antsbin/bin/
        
            and set these environment variables in the equivalent of your
            .bash_profile file, replacing <install_path>: ::
        
                ANTSPATH=<install_path>/antsbin/bin/
                PATH=${ANTSPATH}:${PATH})

Virtual environment and mounted subjects directories
----------------------------------------------------
Mindboggle comes as a single installation program, **mindboggle_vagrant.py**,
that you can copy to wherever you want the startup directory to be.
For help on setup options, type in a terminal::

    python mindboggle_vagrant.py --help

The following command will set up a virtual machine that can access
your local ANTs output directory::

    python mindboggle_vagrant.py --ants /data/ants_out

You can also specify more options, for example, to use 8 processors
and up to 4096 MB memory and 75 percent of the CPU::

    python mindboggle_vagrant.py --ants /data/ants_out -n 8 -m 4096 --cpu 75

The above command generates a file called ``Vagrantfile`` that will be used
when we load up the virtual machine
(see `README <http://mindboggle.info/users/README.html>`_).

.. _INSTALL:

============
Installation
============
We highly recommend running Mindboggle as a virtual machine, since running
Mindboggle only requires one to install two cross-platform programs,
but for those who wish to install from source code, see
`INSTALL_source <http://mindboggle.info/users/INSTALL_source.html>`_.

Dependencies to run Mindboggle
------------------------------
Vagrant_
    Vagrant provides reproducible and portable work environments.
    It isolates dependencies and their configuration within a single
    disposable, consistent environment that can run on
    Linux, Mac OS X, or Windows. The single file distributed as Mindboggle
    creates a virtual environment where everything is installed and configured
    to run Mindboggle.

Virtualbox_
    VirtualBox is a x86 and AMD64/Intel64 virtualization product.
    We use VirtualBox as backend provider for Vagrant;
    alternatives include VMware, Amazon Web Services,...

Dependencies to generate input for Mindboggle
---------------------------------------------
FreeSurfer_
    FreeSurfer provides labeled cortical surfaces, and labeled cortical and
    noncortical volumes.
    See `README <http://mindboggle.info/users/README.html>`_ for instructions
    on how to preprocess T1-weighted MRI data using the ``recon-all`` command.
    NOTE: Mindboggle expects that the FreeSurfer SUBJECTS_DIR environment
    variable is set.

ANTS_
    ANTS provides brain volume extraction, tissue-class segmentation, and
    affine registration that Mindboggle uses to report locations in a standard
    space, and nonlinear registration for whole-brain labeling.
    ANTs data are not required for Mindboggle to run, but improves and
    extends results generated by Mindboggle.
    (Note: After installing ANTS, be sure to copy the files in ANTs/Scripts/
    to the antsbin/bin/ directory, and set the ANTSPATH environment variable.)
    See `README <http://mindboggle.info/users/README.html>`_ for instructions
    on how to preprocess T1-weighted MRI data using the
    ``antsCorticalThickness.sh`` script.

Virtual environment and mounted (FreeSurfer, ANTs) directories
--------------------------------------------------------------
Copy the mindboggle_vagrant.py file to wherever you want the vagrant startup
directory to be. For help on setup options, type in a terminal::

    python mindboggle_vagrant.py --help

Generate Mindboggle's Vagrantfile so that the virtual machine
mounts a local ANTs output directory, and
uses 1 processor and up to 4096 MB memory and 50 percent of the CPU::

    python mindboggle_vagrant.py -n 1 -m 4096 --cpu 50 \
                                 --ants /data/antsCorticalThickness

Optional installations in virtual environment
---------------------------------------------
After loading up the Mindboggle virtual environment (see README_),
you have access to not only the Mindboggle distribution
(Python and C++ source code in /vagrant/Mindboggle),
but a miniconda (Anaconda) Python distribution (/anaconda),
the Visualization ToolKit, and other dependencies.
You can of course install your favorite software (e.g., fsl and afni)
as well in this environment::

    sudo apt-get install fsl afni
